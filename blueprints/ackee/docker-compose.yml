services:
  nginx:
    image: nginx:latest
    restart: on-failure
    volumes:
      - ../files/etc/nginx/nginx.conf:/etc/nginx/nginx.conf:ro
    networks:
      - miranda-network

  client:
    image: 690358416757.dkr.ecr.eu-west-3.amazonaws.com/miranda/client:latest
    restart: always
    env_file:
      .env
    networks:
      - miranda-network

  server:
    image: 690358416757.dkr.ecr.eu-west-3.amazonaws.com/miranda/server:latest
    restart: always
    env_file:
      .env
    networks:
      - miranda-network

  sockets:
    image: 690358416757.dkr.ecr.eu-west-3.amazonaws.com/miranda/sockets:latest
    restart: always
    env_file:
      .env
    networks:
      - miranda-network

networks:
  miranda-network:
    driver: bridge
